# Terminalyzer
**Terminalyzer** – это модуль для обработки консольных параметров с автоматической проверкой типов аргументов и их количества. Поддерживает генерацию помощи и хранение определений команд в файле JSON.

Он выделят три типа параметров:
* _**флаг**_ – выполняет роль переключателя. По умолчанию: _**-flag**_.
* _**ключ**_ – выполняет роль переменной, значение которой указывается через пробел. Если значение содержит пробельные символы или амперсант, его необходимо заключить в кавычки `"`. По умолчанию: _**--key [VALUE]**_.
* _**аргумент**_ – выполняет роль ни к чему не привязанного параметра. Если значение содержит пробельные символы или амперсант, его необходимо заключить в кавычки `"`. По умолчанию: _**[ARGUMENT]**_.

Параметр может являться важным. В таком случае обработчик будет требовать его обязательного наличия.

Отдельно следует упоминуть слои – контейнеры разнородных параметров, позволяющие взаимоисключать друг друга. Например, при установке на один слой важного ключа и важного флага, обработчик будет понимать, что если ключ уже найден, то флаг требовать не нужно.

## Классы
* `ArgumentsTypes` – перечисление типов аргументов:
	* **All** – любое значение;
	* **Number** – целое отрицательное или положительное число, а также ноль;
	* **ValidPath** – существующий путь к файлу или папке;
	* **Text** – только буквенные символы.
	* **URL** – ссылка на WEB-ресурс (при этом проверяется только её формат, а не доступность ресурса).

* `Command` – контейнер для описания команды.
* `CommandData` – контейнер для хранения данных используемой команды.
* `Terminalyzer` – обработчик консольных аргументов.

## Пример
```Python
from dublib.Terminalyzer import *

# Список описаний обрабатываемых команд.
CommandsList = list()

# Создание объекта команды с названием method и неким описанием.
COM_method = Command("method", description = "Some method.")
# Установка указателей флага и ключа. Они используются для идентификации соответствующих параметров. По умолчанию: "-" и "--" соответственно.
COM_method.set_flags_indicator("-")
COM_method.set_keys_indicator("--")
# Добавление к описанию команды позиции флага.
COM_method.add_flag_position(["s"])
# Добавление к описанию команды важной позиции взаимоисключающих флагов.
COM_method.add_flag_position(["dir", "file"], important = True)
# Добавление к описанию команды важной позиции взаимоисключающих ключей с любым типом.
COM_method.add_key_position(["path", "filename"], ArgumentsTypes.All, important = True)
# Добавление к описанию команды важного аргумента с типом Number.
COM_method.add_argument(ArgumentsTypes.Number, important = True)

# Если необходимо сделать разные типы параметров взаимоисклюдчаемыми, их необходимо добавить на один слой. Стоит помнить, что даже один важный параметр в слое делает весь слой важным, то есть один из параметров слоя обязательно должен присутствовать.
COM_another_method.add_flag_position(["flag"], important = True, layout_index = 1)
COM_another_method.add_key_position(["key"], ArgumentsTypes.ValidPath, layout_index = 1)

# Добавление описания команды в список.
CommandsList.append(COM_method)
# Инициализация обработчика консольных аргументов.
CAC = Terminalyzer()
# Включение стандартной обработки помощи.
CAC.enable_help()
# Чтение файла конфигурации в качестве альтернативного метода настройки обработчика.
ConfigCLI = Config("CLI.json")
# Получение информации о проверке команд (из списка или из конфигурации). Возвращает либо объект типа CommandData, либо None при отсутствии названия команды в списке описаний.
CommandDataStruct = CAC.check_commands(CommandsList | Config)

# Если не удалось определить команду.
if CommandDataStruct == None:
	# Обработка отсутствия поддерживаемых комманд.
	pass

else:

	# Обработка команды: method.
	if "method" == CommandDataStruct.name:

		# Если активирован флаг "f".
		if "f" in CommandDataStruct.flags:
			# Выполнение неких действий.
			pass

		# Если активирован ключ "path".
		if "path" in CommandDataStruct.keys:
			# Осуществление доступа к значению ключа.
			CommandDataStruct.values["path"]

		# Осуществление доступа к списку аргументов (в порядке их добавления к параметрам команды).
		CommandDataStruct.arguments[0]
```

## Файл конфигурации
Ниже представлен пример полностью сформированного файла конфигурации, описывающего одну команду с обязательными флагом и ключом на одном слое, а также необязательным аргументом.

Значение ключа `description` используется для построения помощи и может отсутствовать.

Такие ключи, как `important` и `layout-index`, не являются обязательными. По умолчанию они принимают следующие значения, соответственно: _false_, _null_.

```JSON
{
	"commands": {
		"method": {
			"description": "Some method.",
			"flags": [
				{
					"names": [
						"flag_name"
					],
					"important": true,
					"layout-index": 1
				}
			],
			"keys": [
				{
					"names": [
						"key_name"
					],
					"types": [
						"all"
					],
					"important": true,
					"layout-index": 1
				}
			],
			"arguments": [
				{
					"type": "all",
					"important": false,
					"layout-index": null
				}
			]
		}
	}
}
```